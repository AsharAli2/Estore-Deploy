import{aQ as y,e as o,j as t,al as p}from"./index-a0742aba.js";import{S as w,A as g}from"./Snackbar-2fdc3aed.js";import"./ClickAwayListener-57fab9dc.js";import"./Paper-953614ab.js";import"./Grow-86b456d1.js";import"./useTheme-e819c354.js";import"./utils-d19c3896.js";import"./mergeSlotProps-79a0a00c.js";import"./useSlotProps-84961af7.js";const D=()=>{const a=y(),[n,h]=o.useState([]),[i,v]=o.useState(""),[l,x]=o.useState(""),[f,s]=o.useState({open:!1,vertical:"top",horizontal:"center"}),{vertical:d,horizontal:m,open:S}=f,u=c=>{const{value:r,name:e}=c.target;e==="userName"&&v(r),e==="password"&&x(r)},j=async()=>{const e=await(await fetch("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:i,password:l})})).json();h(e),e.User&&(e.User.isUser.userName==="Admin"?(localStorage.setItem("token",JSON.stringify(e.token)),localStorage.setItem("user",JSON.stringify(e.User.isUser)),setTimeout(()=>{a("/Admin/Dashboard")},3e3),s({vertical:"bottom",horizontal:"center",open:!0})):(localStorage.setItem("user",JSON.stringify(e.User.isUser)),localStorage.setItem("token",JSON.stringify(e.token)),setTimeout(()=>{a("/")},3e3),s({vertical:"bottom",horizontal:"center",open:!0}))),e.message=="Wrong Password"&&s({vertical:"bottom",horizontal:"center",open:!0}),e.message=="No User Found"&&s({vertical:"bottom",horizontal:"center",open:!0})},N=(c,r)=>{s({open:!1,vertical:"top",horizontal:"center"})};return t.jsx("div",{className:"login-container",children:t.jsxs("div",{className:"login-box",children:[t.jsx("h2",{children:"Login"}),t.jsx("input",{type:"username",name:"userName",required:!0,placeholder:"Username",value:i,onChange:u}),t.jsx("input",{required:!0,type:"Password",name:"password",placeholder:"Password",value:l,onChange:u}),t.jsx(p,{onClick:j,disabled:!i.length||!l.length,children:"Signin"}),t.jsx("div",{children:t.jsx("h5",{children:"---------------- New to Estore ----------------"})}),t.jsx(p,{className:"register",onClick:()=>a("/Register"),children:"Create your Estore account"}),t.jsx(w,{anchorOrigin:{vertical:d,horizontal:m},open:S,autoHideDuration:2e3,onClose:N,children:n.User?t.jsx(g,{severity:"success",variant:"filled",sx:{width:"100%"},children:n.message}):t.jsx(g,{severity:"error",variant:"filled",sx:{width:"100%"},children:n.message})},d+m)]})})};export{D as default};
